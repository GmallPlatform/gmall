<div class="cart-detail" ng-repeat="block in $ctrl.item.blocks|filter:$ctrl.filterBlocks|orderBy:'index'">
    <div>
        <div  class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
            <p ng-click3="$ctrl.blockEditPermission[$index]=!$ctrl.blockEditPermission[$index]">
                <span>{{$ctrl.listOfBlocks[block.type]}} / {{block.type}}</span>
            </p>
            <div class="togglebutton">
                <label for="block5{{$index}}">
                    <span ng-class="{'active':!block.is}">не опубликован</span>
                    <input type="checkbox"
                           id="block5{{$index}}"
                           ng-model="block.is"
                           ng-change="$ctrl.saveField('blocks.'+block.i+'.is',block.is)">
                    <span ng-class="{'active':block.is}">опубликован</span>
                </label>
            </div>
        </div>
        <div  class="col-lg-1 col-md-1 col-sm-4 col-xs-12">
            <p class="text-center text-small" style="margin-bottom: 0">индекс</p>
            <ui-select ng-model="block.index" skip-focusser="true" search-enabled="false"
                       ng-change="$ctrl.saveField('blocks.'+block.i+'.index',block.index)">
                <ui-select-match placeholder="индекс">{{$select.selected}}</ui-select-match>
                <ui-select-choices repeat="opt in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]">{{ opt }}</ui-select-choices>
            </ui-select>
        </div>

        <div  class="col-lg-4 col-md-4 col-sm-4 col-xs-2 text-center">
            <a class="btn btn-fab btn-fab-mini" ng-click="$ctrl.blockEditTextPermission[$index]=!$ctrl.blockEditTextPermission[$index]" title="редактировать текстовый блок 1">
                <i class="material-icons link-success md-42">looks_one</i>
            </a>
            <a class="btn btn-fab btn-fab-mini" ng-click="$ctrl.blockEditText1Permission[$index]=!$ctrl.blockEditText1Permission[$index]" title="редактировать текстовый блок 2">
                <i class="material-icons link-success md-42">looks_two</i>
            </a>
            <a class="btn btn-fab btn-fab-mini" ng-click="$ctrl.blockEditMediaPermission[$index]=!$ctrl.blockEditMediaPermission[$index]" title="редактировать фото/видео">
                <i class="material-icons link-success md-42">image</i>
            </a>
            <a class="btn btn-fab btn-fab-mini" ng-click="$ctrl.blockEditMedia1Permission[$index]=!$ctrl.blockEditMedia1Permission[$index]" title="редактировать слайды">
                <i class="material-icons link-success md-42">photo_library</i>
            </a>
            <div class="togglebutton text-center form-group">
                <label for="block433f{{$index}}">
                    <span ng-class="{'active':!block.template}">обычный</span>
                    <input type="checkbox"
                           id="block433f{{$index}}"
                           ng-model="block.template"
                           ng-change="$ctrl.saveField('blocks.'+block.i+'.template',block.template)">
                    <span ng-class="{'active':block.template}">шаблон</span>
                </label>
            </div>
        </div>
        <div  class="col-lg-4 col-md-4 col-sm-8 col-xs-10">
            <a class="btn btn-fab btn-fab-mini " ng-click="$ctrl.blockSettingPermission[$index]=!$ctrl.blockSettingPermission[$index]">
                <i class="material-icons link-pink md-42">settings</i>
            </a>
            <a class="btn btn-fab btn-fab-mini" ng-click="$ctrl.setStyles(block,$index)" title="установить стили">
                <i class="material-icons link-info md-42" title="установить стили">opacity</i>
            </a>
            <a class="btn btn-fab btn-fab-mini" ng-click="$ctrl.getBlockConfig(block)">
                <i class="material-icons link-primary md-42" title="загрузить шаблон">archive</i>
            </a>
            <a class="btn btn-fab btn-fab-mini"  ng-click="$ctrl.cloneBlock(block)">
                <i class="material-icons md-42" title="клонировать блок">add_to_photos</i>
            </a>
            <a class="btn btn-fab btn-fab-mini pull-right" ng-click="$ctrl.deleteBlock(block)" title="удалить блок">
                <i class="material-icons link-warning md-42">delete</i>
            </a>
            <div class="form-group label-floating" ng-show="block.template">
                <label class="control-label">название шаблона</label>
                <input class="form-control" ng-model="block.nameTemplate"
                       ng-model-options="{'updateOn': 'default blur',
                            'debounce': {'default': 700,'blur': 0}}"
                       ng-change="$ctrl.saveField('blocks.'+block.i+'.nameTemplate',block.nameTemplate)">
            </div>
        </div>

        <div class="clearfix"></div>
    </div>


    <div class="clearfix"></div>

    <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12" uib-collapse="!$ctrl.blockSettingPermission[$index]">
        <hr>
        <style-block-page></style-block-page>
    </div>
    <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12" uib-collapse="!$ctrl.blockEditTextPermission[$index]">
        <hr>
        <block-text-edit></block-text-edit>
    </div>
    <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12" uib-collapse="!$ctrl.blockEditText1Permission[$index]">
        <hr>
        <block-text1-edit></block-text1-edit>
    </div>
    <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12" uib-collapse="!$ctrl.blockEditMediaPermission[$index]">
        <hr>
        <block-media-edit></block-media-edit>
    </div>
    <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12" uib-collapse="!$ctrl.blockEditMedia1Permission[$index]">
        <hr>
        <div directive="{{block.type}}"></div>
        <!--<block-media1-edit></block-media1-edit>-->
    </div>
    <div class="clearfix"></div>
</div>